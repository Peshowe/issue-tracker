(this["webpackJsonpfrontend-client"]=this["webpackJsonpfrontend-client"]||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);n(58);var c,s,r,i=n(0),o=n.n(i),a=n(15),u=n.n(a),j=(n(63),n(43)),l=n(2),b=n(4),d=(n(64),n(50)),O=n(24),f=n(6),p=n(1),h=f.default.ul(c||(c=Object(b.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n"]))),x=f.default.li(s||(s=Object(b.a)(["\n  display: block;\n  margin: 0;\n  padding: 0;\n"]))),m=f.default.div(r||(r=Object(b.a)(["\n  border-bottom: 1px solid #efefef;\n  color: ",";\n  display: block;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 16px;\n  font-weight: 700;\n  margin-left: 18px;\n  padding: 18px 18px 18px 5px;\n  text-decoration: none;\n  text-transform: uppercase;\n  transition: background 200ms ease-in-out;\n  &:hover {\n    color: rgba(218, 135, 196);\n  }\n"])),(function(e){return e.active?"rgba(218, 135, 196)":"#333"}));var g,v,y=function(e){var t=Object(i.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(null),o=Object(l.a)(r,2),a=(o[0],o[1]);return Object(i.useEffect)((function(){fetch("v1/mailer/preferences/".concat(e.user)).then((function(e){return e.json()})).then((function(e){null==e.is_mail_notification_on?s("false"):s(e.is_mail_notification_on)}),(function(e){a(e)}))}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(h,{children:Object(p.jsx)(x,{children:Object(p.jsxs)(m,{children:["Mail notifications:",Object(p.jsxs)("select",{value:c,onChange:function(t){s(t.target.value),fetch("/v1/mailer/preferences",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user:e.user,is_mail_notification_on:"true"==t.target.value})}).then((function(e){a(e)}))},children:[Object(p.jsx)("option",{value:"true",children:"On"}),Object(p.jsx)("option",{value:"false",children:"Off"})]})]})})})})},S=n(46),C=function(e){var t=e.onClose;return Object(p.jsx)("div",{style:{padding:"10px 10px 20px 10px",textAlign:"right"},children:Object(p.jsx)(S.a,{onClick:t,size:36,style:{cursor:"pointer",textAlign:"center"}})})},k=n(47),w=Object(f.default)(k.a)(g||(g=Object(b.a)(["\n  ","\n  color: #fff;\n  ","\n  ","\n  transition: transform 200ms ease-in-out;\n  &:hover {\n    transform: scale(1.2);\n  }\n"])),"","",""),I=function(){return Object(p.jsx)("a",{href:"https://github.com/Peshowe/issue-tracker/",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(w,{size:36})})},N=n(48),_=Object(f.default)(N.a)(v||(v=Object(b.a)(["\n&:hover {\n    transform: scale(1.2);\n  }\n"])));var P,E=function(e){return Object(p.jsx)(_,{size:48,style:{borderRadius:"6px",padding:"8px",cursor:"pointer"},onClick:function(){"/"!=window.location.pathname&&window.history.back()}})},T=n(49),A=Object(f.default)(T.a)(P||(P=Object(b.a)(["\n&:hover {\n    transform: scale(1.2);\n  }\n"])));var B,F=function(e){return Object(p.jsxs)("span",{style:{float:"right",paddingRight:"0.5em"},children:["Hi, ",e.user,Object(p.jsx)(A,{size:48,style:{borderRadius:"6px",padding:"8px",cursor:"pointer"},onClick:function(){fetch("/auth/logout").then((function(e){window.location.reload()}),(function(e){window.location.reload()}))}})]})},D=Object(f.default)(d.a)(B||(B=Object(b.a)(["\n&:hover {\n    transform: scale(1.2);\n  }\n"])));var J=function(e){var t,n,c=Object(i.useState)(!1),s=Object(l.a)(c,2),r=s[0],o=s[1];return""==e.user?(t=Object(p.jsx)(O.Menu,{}),n=Object(p.jsx)("span",{})):(t=Object(p.jsx)(O.Menu,{children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C,{onClose:function(){return o(!1)}}),Object(p.jsx)(y,{user:e.user})]})}),n=Object(p.jsxs)("span",{children:[Object(p.jsx)(E,{}),Object(p.jsx)(D,{size:48,style:{borderRadius:"6px",padding:"8px",cursor:"pointer"},onClick:function(){o((function(e){return!e}))}}),Object(p.jsx)(I,{}),Object(p.jsx)(F,{user:e.user})]})),Object(p.jsx)("div",{children:Object(p.jsxs)(O.StyledOffCanvas,{menuBackground:"black",isOpen:r,onClose:function(){return o(!1)},children:[n,Object(p.jsx)("span",{style:{padding:"8px","font-size":"1.7em","margin-left":"1em"},children:"Parvus JIRA"}),t,Object(p.jsx)(O.Overlay,{})]})})},z=n(29),L=n(5),M=n(51);var R,H=function(){return Object(p.jsx)(M.FingerprintSpinner,{color:"red"})},U=n(13),K=n.n(U),X=K.a.styled(R||(R=Object(b.a)(["\n  width: 30rem;\n  height: 20rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: grey;\n  opacity: ",";\n  transition : all 0.3s ease-in-out;"])),(function(e){return e.opacity}));var V=function(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(0),o=Object(l.a)(r,2),a=o[0],u=o[1],j=Object(i.useState)(""),b=Object(l.a)(j,2),d=b[0],O=b[1],f=Object(i.useState)(!1),h=Object(l.a)(f,2),x=h[0],m=h[1],g=Object(i.useState)(null),v=Object(l.a)(g,2),y=v[0],S=v[1];function C(e){u(0),s(!c)}function k(e){O(e.target.value)}function w(){m(!0),fetch("/v1/projects",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:d})}).then((function(t){m(!1),s(!1),e.onCreate()}),(function(e){m(!1),S(e)}))}return Object(p.jsxs)("div",{style:{padding:"1.5em"},children:[Object(p.jsx)("button",{onClick:C,className:"btn btn-primary",children:"New Project"}),Object(p.jsx)(X,{isOpen:c,afterOpen:function(){setTimeout((function(){u(1)}),100)},beforeClose:function(){return new Promise((function(e){u(0),setTimeout(e,300)}))},onBackgroundClick:C,onEscapeKeydown:C,opacity:a,backgroundProps:{opacity:a},children:x?Object(p.jsx)(H,{}):y?Object(p.jsxs)("div",{children:["Error: ",y.message]}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("form",{children:[Object(p.jsx)("label",{children:"Project Name: "}),Object(p.jsx)("input",{type:"text",value:d,onChange:k})]}),Object(p.jsx)("button",{onClick:w,className:"btn btn-primary",children:"Create"})]})})]})};var Y=function(){var e=Object(i.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(!1),r=Object(l.a)(s,2),o=r[0],a=r[1],u=Object(i.useState)([]),j=Object(l.a)(u,2),b=j[0],d=j[1];function O(){fetch("/v1/projects").then((function(e){return e.json()})).then((function(e){a(!0),void 0!=e.projects&&d(e.projects)}),(function(e){a(!0),c(e)}))}return Object(i.useEffect)((function(){O()}),[]),n?Object(p.jsxs)("div",{children:["Error: ",n.message]}):o?Object(p.jsxs)("div",{children:[Object(p.jsx)(V,{onCreate:O}),b.map((function(e){return Object(p.jsx)("div",{className:"listItem",children:Object(p.jsx)(z.b,{to:"/projects/".concat(e.id),className:"btn btn-primary",children:e.name})})}))]}):Object(p.jsx)(H,{})},q=n(53),G=n(17),Q=n(54),W=n.n(Q),Z=n(57);var $,ee=function(e){var t=Object(i.useState)({}),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(""),o=Object(l.a)(r,2),a=o[0],u=o[1],j=Object(i.useState)(""),b=Object(l.a)(j,2),d=b[0],O=b[1],f=Object(i.useState)("feature"),h=Object(l.a)(f,2),x=h[0],m=h[1],g=Object(i.useState)(""),v=Object(l.a)(g,2),y=v[0],S=v[1],C=Object(i.useState)(null),k=Object(l.a)(C,2),w=k[0],I=k[1];Object(i.useEffect)((function(){null!=e.issue?(s(e.issue),"name"in e.issue&&u(e.issue.name),"desc"in e.issue&&O(e.issue.desc),"issue_type"in e.issue&&m(e.issue.issue_type),"bug_trace"in e.issue&&S(e.issue.bug_trace),"user"in e.issue?I(e.issue.user):I("")):I(e.user)}),[]);var N,_=[];return e.users.forEach((function(e){return _.push({value:e,label:e})})),null!=w&&(N=Object(p.jsx)(Z.a,{defaultValue:{value:w,label:w},options:_,className:"basic-multi-select",classNamePrefix:"select",onChange:function(e){return I(e.value)}})),Object(p.jsxs)("div",{style:{},children:[Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Name: "}),Object(p.jsx)("input",{type:"text",value:a,onChange:function(e){return u(e.target.value)}}),Object(p.jsx)("label",{children:"Issue type: "}),Object(p.jsxs)("select",{value:x,onChange:function(e){return m(e.target.value)},children:[Object(p.jsx)("option",{value:"bug",children:"Bug"}),Object(p.jsx)("option",{value:"feature",children:"Feature"}),Object(p.jsx)("option",{value:"adhoc",children:"Ad Hoc"})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Description: "}),Object(p.jsx)("br",{}),Object(p.jsx)("textarea",{className:"inputArea",value:d,onChange:function(e){return O(e.target.value)}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Bug trace: "}),Object(p.jsx)("br",{}),Object(p.jsx)("textarea",{className:"inputArea",value:y,onChange:function(e){return S(e.target.value)}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Owner: "}),N,Object(p.jsx)("br",{})]})]}),Object(p.jsx)("button",{onClick:function(){c.name=a,c.desc=d,c.issue_type=x,c.bug_trace=y,c.user=w,s(c),e.buttonHandler(c)},className:"btn btn-primary",children:e.buttonLabel})]})},te=K.a.styled($||($=Object(b.a)(["\n  width: 70rem;\n  height: 40rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: grey;\n  opacity: ",";\n  transition : all 0.3s ease-in-out;"])),(function(e){return e.opacity}));var ne,ce=function(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(0),o=Object(l.a)(r,2),a=o[0],u=o[1],j=Object(i.useState)(!1),b=Object(l.a)(j,2),d=b[0],O=b[1],f=Object(i.useState)(null),h=Object(l.a)(f,2),x=h[0],m=h[1];function g(e){e.stopPropagation(),u(0),s(!c)}function v(t){O(!0),e.onSubmit(t).then((function(t){O(!1),s(!1),e.onDone()}),(function(e){O(!1),m(e)}))}var y=null==e.issue?"Create Issue":"Update Issue",S=null==e.issue?"New Issue":e.issue.name;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:g,className:"btn btn-primary",children:S}),Object(p.jsx)(te,{isOpen:c,afterOpen:function(){setTimeout((function(){u(1)}),100)},beforeClose:function(){return new Promise((function(e){u(0),setTimeout(e,300)}))},onBackgroundClick:g,onEscapeKeydown:g,opacity:a,backgroundProps:{opacity:a},children:d?Object(p.jsx)(H,{}):x?Object(p.jsxs)("div",{children:["Error: ",x.message]}):Object(p.jsx)(ee,{buttonHandler:v,buttonLabel:y,issue:e.issue,user:e.user,users:e.users})})]})},se=K.a.styled(ne||(ne=Object(b.a)(["\n  width: 30rem;\n  height: 20rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: grey;\n  opacity: ",";\n  transition : all 0.3s ease-in-out;"])),(function(e){return e.opacity}));var re,ie=function(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(0),o=Object(l.a)(r,2),a=o[0],u=o[1],j=Object(i.useState)(""),b=Object(l.a)(j,2),d=b[0],O=b[1],f=Object(i.useState)(!1),h=Object(l.a)(f,2),x=h[0],m=h[1],g=Object(i.useState)(null),v=Object(l.a)(g,2),y=v[0],S=v[1];function C(e){u(0),s(!c)}function k(e){O(e.target.value)}function w(){m(!0),fetch("/v1/projects/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({projectId:e.projectId,userId:d})}).then((function(e){m(!1),s(!1)}),(function(e){m(!1),S(e)}))}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:C,className:"btn btn-primary",style:{margin:"0.5em"},children:"Add User"}),Object(p.jsx)(se,{isOpen:c,afterOpen:function(){setTimeout((function(){u(1)}),100)},beforeClose:function(){return new Promise((function(e){u(0),setTimeout(e,300)}))},onBackgroundClick:C,onEscapeKeydown:C,opacity:a,backgroundProps:{opacity:a},children:x?Object(p.jsx)(H,{}):y?Object(p.jsxs)("div",{children:["Error: ",y.message]}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("form",{children:[Object(p.jsx)("label",{children:"User: "}),Object(p.jsx)("input",{type:"text",value:d,onChange:k})]}),Object(p.jsx)("button",{onClick:w,className:"btn btn-primary",children:"Add"})]})})]})},oe=K.a.styled(re||(re=Object(b.a)(["\n  width: 30rem;\n  height: 20rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: grey;\n  opacity: ",";\n  transition : all 0.3s ease-in-out;"])),(function(e){return e.opacity}));var ae=function(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(0),o=Object(l.a)(r,2),a=o[0],u=o[1],j=Object(i.useState)(!1),b=Object(l.a)(j,2),d=b[0],O=b[1],f=Object(i.useState)(null),h=Object(l.a)(f,2),x=h[0],m=h[1];function g(e){u(0),s(!c)}function v(){O(!0),fetch("/v1/projects/users",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({projectId:e.projectId,userId:e.user})}).then((function(e){O(!1),s(!1)}),(function(e){O(!1),m(e)}))}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:g,className:"btn btn-primary",style:{float:"right"},children:"Leave Project"}),Object(p.jsx)(oe,{isOpen:c,afterOpen:function(){setTimeout((function(){u(1)}),100)},beforeClose:function(){return new Promise((function(e){u(0),setTimeout(e,300)}))},onBackgroundClick:g,onEscapeKeydown:g,opacity:a,backgroundProps:{opacity:a},children:d?Object(p.jsx)(H,{}):x?Object(p.jsxs)("div",{children:["Error: ",x.message]}):Object(p.jsxs)("div",{children:["Are you sure you want to leave the project?",Object(p.jsx)("button",{onClick:v,className:"btn btn-primary",children:"Yes, leave"})]})})]})};var ue=function(e){var t=Object(i.useState)(null),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(!1),o=Object(l.a)(r,2),a=o[0],u=o[1],j=Object(i.useState)([]),b=Object(l.a)(j,2),d=b[0],O=b[1],f=Object(i.useState)([]),h=Object(l.a)(f,2),x=h[0],m=h[1],g=Object(i.useState)([]),v=Object(l.a)(g,2),y=v[0],S=v[1],C=["todo_col","inprogress_col","done_col"],k=["to do","in progress","done"];function w(e){return fetch("/v1/issues",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({issue:e})})}function I(e,t){!function(e){"to do"==e.status?O(d.filter((function(t){return t.id!=e.id}))):"in progress"==e.status?m(x.filter((function(t){return t.id!=e.id}))):"done"==e.status&&S(y.filter((function(t){return t.id!=e.id})))}(e),e.status=t,function(e){"to do"==e.status?O([].concat(Object(G.a)(d),[e])):"in progress"==e.status?m([].concat(Object(G.a)(x),[e])):"done"==e.status&&S([].concat(Object(G.a)(y),[e]))}(e),u(!1),w(e).then((function(e){u(!0)}),(function(e){u(!0),s(e)}))}function N(){fetch("/v1/issues/byproject/".concat(e.projectId)).then((function(e){return e.json()})).then((function(e){if(u(!0),void 0!=e.issues){var t=e.issues;t.sort((function(e,t){return e.last_modified_on-t.last_modified_on})),O(t.filter((function(e){return"to do"==e.status}))),m(t.filter((function(e){return"in progress"==e.status}))),S(t.filter((function(e){return"done"==e.status})))}}),(function(e){u(!0),s(e)}))}function _(t){var n,c=[],s=Object(q.a)(t.entries());try{var r=function(){var t=Object(l.a)(n.value,2),s=(t[0],t[1]);c.push(Object(p.jsx)(W.a,{bounds:"#board",onDrag:function(e){return function(e,t){var n;for(e.stopPropagation(),n=0;n<C.length;n++){var c=document.getElementById(C[n]).getBoundingClientRect();if(e.clientX>c.left&&e.clientX<c.right){console.log("In "+k[n]),t.status==k[n]?(O(d),console.log("no change")):I(t,k[n]);break}}}(e,s)},children:Object(p.jsx)("div",{className:"listItem",children:Object(p.jsx)(ce,{issue:s,user:e.user,users:e.users,onSubmit:w,onDone:function(){return""}})})}))};for(s.s();!(n=s.n()).done;)r()}catch(i){s.e(i)}finally{s.f()}return c}if(Object(i.useEffect)((function(){N()}),[]),c)return Object(p.jsxs)("div",{children:["Error: ",c.message]});if(a){var P=_(d),E=_(x),T=_(y);return Object(p.jsxs)("div",{style:{padding:"1.5em"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(ce,{projectId:e.projectId,user:e.user,users:e.users,onSubmit:function(t){return fetch("/v1/issues",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({issue:{name:t.name,desc:t.desc,issue_type:t.issue_type,bug_trace:t.bug_trace,status:"to do",project:e.projectId,user:t.user}})})},issue:null,onDone:N}),Object(p.jsx)(ie,{projectId:e.projectId}),Object(p.jsx)(ae,{projectId:e.projectId,user:e.user})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{id:"board",className:"row",style:{position:"relative",overflow:"auto",padding:"0"},children:[Object(p.jsxs)("div",{id:C[0],className:"column",children:["To Do",P]}),Object(p.jsxs)("div",{id:C[1],className:"column",children:["In progress",E]}),Object(p.jsxs)("div",{id:C[2],className:"column",children:["Done",T]})]})]})}return Object(p.jsx)(H,{})};var je,le=function(e){var t=Object(i.useState)(null),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(i.useState)(!1),o=Object(l.a)(r,2),a=o[0],u=o[1],j=Object(i.useState)(null),b=Object(l.a)(j,2),d=b[0],O=b[1];return Object(i.useEffect)((function(){fetch("/v1/projects/byid/".concat(e.match.params.projectId)).then((function(e){return e.json()})).then((function(e){O(e),u(!0)}),(function(e){u(!0),s(e)}))}),[]),c?Object(p.jsxs)("div",{children:["Error: ",c.message]}):a?Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{style:{"padding-top":"0.5em","padding-left":"1em"},children:d.name}),Object(p.jsx)(ue,{projectId:d.id,user:e.user,users:d.users})]}):Object(p.jsx)(H,{})},be=n(55),de=Object(f.default)(be.a)(je||(je=Object(b.a)(["\n  color: #fff;\n  transition: transform 200ms ease-in-out;\n  &:hover {\n    transform: scale(1.2);\n  }\n"])));var Oe,fe=function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Login: "}),Object(p.jsx)("a",{href:window.location.origin+"/auth/google",children:Object(p.jsx)(de,{size:36,style:{cursor:"pointer",textAlign:"center"}})})]})},pe=Object(f.default)(U.BaseModalBackground)(Oe||(Oe=Object(b.a)(["\n  opacity: ",";\n  transition: all 0.3s ease-in-out;\n"])),(function(e){return e.opacity})),he=function(){var e=Object(i.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(null),r=Object(l.a)(s,2),o=(r[0],r[1]);return Object(i.useEffect)((function(){fetch("auth/user").then((function(e){return e.json()})).then((function(e){c(e.user)}),(function(e){o(e)}))}),[]),Object(p.jsx)("div",{children:Object(p.jsxs)(U.ModalProvider,{backgroundComponent:pe,children:[Object(p.jsx)(J,{user:n}),Object(p.jsx)(z.a,{children:Object(p.jsxs)(L.c,{children:[Object(p.jsx)(L.a,{path:"/projects/:projectId",render:function(e){return Object(p.jsx)(le,Object(j.a)({user:n},e))}}),Object(p.jsx)(L.a,{path:"/login",component:fe}),Object(p.jsx)(L.a,{path:"/",children:Object(p.jsx)(Y,{})})]})})]})})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),r(e),i(e)}))};u.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(he,{})}),document.getElementById("root")),xe()}},[[92,1,2]]]);
//# sourceMappingURL=main.b3f9d02b.chunk.js.map